<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ö–Ω–∏–∂–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="{{ url_for('main.index') }}">üìö –ö–Ω–∏–∂–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω</a>
            </div>

            <div class="search">
                <form action="{{ url_for('main.search') }}" method="GET">
                    <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –∫–Ω–∏–≥..." value="{{ request.args.get('q', '') }}">
                    <button type="submit">–ù–∞–π—Ç–∏</button>
                </form>
            </div>

            <div class="nav-links">
                <a href="{{ url_for('main.catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('main.cart') }}">üõí –ö–æ—Ä–∑–∏–Ω–∞ ({{ session.get('cart', [])|length }})</a>
                    <a href="{{ url_for('main.orders') }}">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                    <span>üë§ {{ current_user.name }}</span>
                    <a href="{{ url_for('main.logout') }}">üö™ –í—ã–π—Ç–∏</a>
                {% else %}
                    <a href="{{ url_for('main.login') }}">üîë –í–æ–π—Ç–∏</a>
                    <a href="{{ url_for('main.register') }}">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </nav>
    </header>

    <main>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash {{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>&copy; 2023 –ö–Ω–∏–∂–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
</body>
</html>